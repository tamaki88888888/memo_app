{"ast":null,"code":"var _jsxFileName = \"/Users/koutamakin/development/tamaki/memo_app/components/Address.js\";\nvar __jsx = React.createElement;\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport Router from 'next/router';\nimport firebase from 'firebase';\nimport Lib from '../static/address_lib';\nimport Account from '../components/Account';\n\nclass Address extends Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"style\", {\n      fontSize: '12pt',\n      padding: '5px 10px'\n    });\n\n    this.logined = this.logined.bind(this);\n  } //login,logout処理\n\n\n  logined() {\n    this.getFIreData();\n  }\n\n  logouted() {\n    Router.push('/address');\n  } //Firebaseからデータを取得\n\n\n  getFireData() {\n    if (this.props.email == undefined || this.props.email == '') {\n      return;\n    }\n\n    let email = Lib.encodeEmail(this.props.email);\n    let db = firebase.database();\n    let ref = db.ref('address/');\n    let self = this;\n    ref.orderByKey().equalTo(email).on('value', snapshot => {\n      let d = Lib.deepcopy(snapshot.val());\n      this.props.dispatch({\n        type: 'UPDATE_USER',\n        value: {\n          login: this.props.login,\n          username: this.props.username,\n          email: this.props.email,\n          data: d,\n          items: self.getItem(d)\n        }\n      });\n    });\n  } //dataを元に表示項目を作成\n\n\n  getItem(data) {\n    if (data == undefined) {\n      return;\n    }\n\n    let res = [];\n\n    for (let I in data) {\n      for (let ij in data[i]) {\n        let email = Lib.decodeEmail(j);\n        let s = data[i][j]['name'];\n        res.push(__jsx(\"li\", {\n          key: j,\n          \"data-tag\": email,\n          onClick: this.go.bind(null, email),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 60\n          },\n          __self: this\n        }, data[i][j]['check'] == true ? __jsx(\"b\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 62\n          },\n          __self: this\n        }, \"\\uFF01\") : '', s, \"(\", email, \")\"));\n      }\n\n      break;\n    }\n\n    return res;\n  } //レンダリング\n\n\n  render() {\n    return __jsx(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }, __jsx(Account, {\n      onLogouted: this.logouted,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }), __jsx(\"ul\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }, this.props.items == [] ? __jsx(\"li\", {\n      key: \"0\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }, \"no item.\") : this.props.items));\n  }\n\n}\n\naddress = connect(state => state)(Address);\nexport default Address;","map":{"version":3,"sources":["/Users/koutamakin/development/tamaki/memo_app/components/Address.js"],"names":["React","Component","connect","Router","firebase","Lib","Account","Address","constructor","props","fontSize","padding","logined","bind","getFIreData","logouted","push","getFireData","email","undefined","encodeEmail","db","database","ref","self","orderByKey","equalTo","on","snapshot","d","deepcopy","val","dispatch","type","value","login","username","data","items","getItem","res","I","ij","i","decodeEmail","j","s","go","render","address","state"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport Router from 'next/router';\nimport firebase from 'firebase';\nimport Lib from '../static/address_lib';\nimport Account from '../components/Account';\n\nclass Address extends Component {\n\tstyle = {\n\t\tfontSize:'12pt',\n\t\tpadding:'5px 10px'\n\t}\n\n\tconstructor(props){\n\t\tsuper(props);\n\t\tthis.logined = this.logined.bind(this);\n\t}\n\n\t//login,logout処理\n\tlogined(){\n\t\tthis.getFIreData();\n\t}\n\tlogouted(){\n\t\tRouter.push('/address');\n\t}\n\n\t//Firebaseからデータを取得\n\tgetFireData(){\n\t\tif(this.props.email == undefined||this.props.email == ''){ return; }\n\t\tlet email = Lib.encodeEmail(this.props.email);\n\t\tlet db = firebase.database();\n\t\tlet ref = db.ref('address/');\n\t\tlet self = this;\n\t\tref.orderByKey()\n\t\t.equalTo(email)\n\t\t.on('value', (snapshot)=>{\n\t\t\tlet d = Lib.deepcopy(snapshot.val());\n\t\t\tthis.props.dispatch({\n\t\t\t\ttype:'UPDATE_USER',\n\t\t\t\tvalue:{\n\t\t\t\t\tlogin:this.props.login,\n\t\t\t\t\tusername:this.props.username,\n\t\t\t\t\temail:this.props.email,\n\t\t\t\t\tdata:d,\n\t\t\t\t\titems:self.getItem(d)\n\t\t\t\t}\n\t\t\t})\n\t\t})\n\t}\n\n\t//dataを元に表示項目を作成\n\tgetItem(data){\n\t\tif(data == undefined){ return; }\n\t\tlet res = [];\n\t\tfor (let I in data ) {\n\t\t\tfor (let ij in data[i]){\n\t\t\t\tlet email = Lib.decodeEmail(j);\n\t\t\t\tlet s = data[i][j]['name'];\n\t\n\t\t\t\tres.push(<li key={j} data-tag={email} onClick={this.go.bind(null, email)}>\n\t\t\t\t\t{data[i][j]['check'] == true ?\n\t\t\t\t\t<b>！</b> : ''}{s}({email})\n\t\t\t\t</li>);\n\t\t\t}\n\t\t\tbreak;\n\t\t}\n\t\treturn res;\n\t}\n\t\t\n\t//レンダリング\n\trender(){\n\t\treturn(\n\t\t\t<div>\n\t\t\t\t<Account onLogouted={this.logouted} />\n\t\t\t\t<ul>\n\t\t\t\t\t{this.props.items == []\n\t\t\t\t\t?\n\t\t\t\t\t<li key='0'>no item.</li>\n\t\t\t\t\t:\n\t\t\t\t\tthis.props.items\n\t\t\t\t\t}\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t)\n\t}\n}\n\naddress = connect((state)=>state)(Address);\nexport default Address;\n"]},"metadata":{},"sourceType":"module"}